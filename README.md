<a href="https://github.com/mmalenic/evget/blob/main/LICENSE" target="_blank"><img
alt="MIT licensed" src="https://img.shields.io/badge/license-MIT-blue.svg"/></a>
<a href="https://github.com/mmalenic/evget/actions?query=workflow%3Atest+branch%3Amain" target="_blank"><img
alt="Build status" src="https://github.com/mmalenic/evget/actions/workflows/test.yaml/badge.svg"/></a>
<a href="https://mmalenic.github.io/evget" target="_blank"><img
alt="MIT licensed" src="https://img.shields.io/badge/docs-API-blue.svg"/></a>

# evget - system input events

[API Documentation][api-docs]

Shows a unified view of system input events.

Currently only X11 events are supported, with plans to support other platforms like Windows.

## Usage

Show input events by running the command, which prints events to stdout:

```sh
evget
```

To store output to a file, specify `-o` and a JSON or sqlite file. The file extension determines the format:

```sh
evget -o store.json # store data in a JSON file.
evget -o store.sqlite # or, store it in an sqlite database.
```

When reusing an existing file, new events are appended.

Events are stored on an interval-based system where `--store-n-events` determines how many events are needed to initiate
a write, and `--store-after-seconds` determines how often to write. When the number of events buffered passes
`--store-n-events`, or `--store-after-seconds` time has passed, a write is called.

## Build

This project uses a [just] to manage development, [conan] as the package manager and [cmake] as the build tool.
To build the project, run:

```sh
just build
```

This requires at least [gcc-14] or [clang-19] because the project uses newer C++23 features.

## Development

Tests can be run using:

```sh
just test
```

This project uses [pre-commit] and [clang-tidy] to lint code. To format and lint the code run:

```sh
just check
```

## Library usage

This project can also be built and used as a library. View the API docs [here][api-docs].

The library can be built without the binary using:

```sh
just build_lib
```

If using this project as a submodule and cmake, it can be included by using `add_subdirectory` and linking against the
`libevget` or `libevgetx11` targets:

```cmake
add_subdirectory(evget)
target_link_libraries(${PROJECT_NAME} PRIVATE libevget)

add_subdirectory(evgetx11)
target_link_libraries(${PROJECT_NAME} PRIVATE libevgetx11)
```

Code documentation can be generated by running:

```sh
just doc
```

[just]: https://github.com/casey/just
[conan]: https://docs.conan.io/2/installation.html
[cmake]: https://cmake.org/
[gcc-14]: https://gcc.gnu.org/gcc-14/
[clang-19]: https://releases.llvm.org/19.1.0/tools/clang/docs/ReleaseNotes.html
[clang-tidy]: https://clang.llvm.org/extra/clang-tidy/
[pre-commit]: https://pre-commit.com/
[api-docs]: https://mmalenic.github.io/evget
